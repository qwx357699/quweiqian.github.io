# 域名和DNS
## 域名

域名👉 `www.baidu.com`

域名的作用是帮助人类记忆网站地址，有了域名，就不用去记IP地址了

域名的类型有以下几种：

- 根域名：`.`
- 顶级域名：`.cn .com .net .us .uk .org ... `
- 二级域名：`.com .gov .org .edu 自定义 baidu jd taobao ...`
- 三级域名：`自定义 www.baidu.com www.jd.com www.taobao.com`
- 四级域名：`自定义 www.pku.edu.cn  mail.internal.jd.com`

一般来说，购买二级域名后，三级、四级域名都是可以免费自定义的

----

*补充：*

- 根域名一般省略不写，例如 `www.baidu.com` 完整的应该是 `www.baidu.com.`

- 顶级域名不是都能买的，比如 .org 组织，只能申请， .us .uk 国家域名可以购买，表示是哪个国家的。.com 表示公司，.net 表示互联网公司

- 二级域名一般需要购买，域名组合 .com.cn，这时 .com 属于二级域名，大部分自己定义的域名需要购买

- 三级域名，四级域名，一般是购买一级二级域名后，自己定义的，比如 www 。例如：

  duyideu.com 表示购买了二级域名为 .duyiedu 一级域名选择了 .com。

  abc.duyiedu.com 、mail.duyiedu.com

  三级域名自己定义，上面定以后能分别对应不同的 ip

-  `www.pku.edu.cn ` .edu 二级域名被国家注册了，表示国际的教育机构，买的是三级域名

----



## DNS

域名虽然有助于记忆，但是网络传输和域名没有半毛钱关系

**网络传输必须依靠IP**

所以，必须有一个东西，能够将域名转换成IP地址，这个东西就是DNS服务器，翻译成IP地址的过程称之为**域名解析**

<img src="https://qwq9527.gitee.io/resource/imgs/20211027170039.png" alt="image-20211027164448706" style="zoom:50%;" align="left" />

全世界认可的DNS服务器一共有三种，外加一种局部使用的本地DNS服务器，一共四种。

<img src="https://qwq9527.gitee.io/resource/imgs/20211027170039.png" alt="image-20211027170039192" style="zoom:50%;" align="left"/>

为了使得解析速度更快、查询的节点更少，上述每个节点都可能设置高速缓存来加速解析

----

*补充：*

1. 域名怎么知道 ip ?买了域名后，从域名提供商那边配置，

   如进入阿里云的域名列表，Domain Name List 页面,列表尾部 Action 操作 Resolve 表示解析。点击进入后，进入解析设置

   

   <img src="https://qwq9527.gitee.io/resource/imgs/yu.jpg" alt="image-20211027170039192" style="zoom:80%;" align="left"/>

   - \* 表示**泛域名解析**，将所有的三级域名都解析到这个地址。国内的域名解析都要先进行身份认证。
   - @ 表示前面不写，直接使用二级域名，没有三级域名的情况下，解析到哪个地址。
   - 第一条记录中的 CNAME 记录，表示访问 resume.yuanjin.tech 会转到四级域名，然后再通过这个四级域名再找到这个四级域名的 ip。
   - 注意看第二条记录中有五级域名，SSL是可以支持5级域名的，不过在申请的时候需要用4级域名来申请SSL证书。

2. 任何类型系统电脑上都有 host 文件，如果 host 文件中配置 `127.0.0.1 www.xinlang.com` 那么再访问 `http://www.sina.com` 就是本地的 （host 文件需要 ASCI 编码，nodepad++ 默认 utf-8 导致修改无效）

3. 本机先看 dns 缓存，缓存中没有解析数据再访问 host 文件。（怪不得修改 host 文件后需要执行 ipconfig/flushdns 刷新dns缓存操作）

4. 本地域名服务器（电脑自己配置的 dns），比如说学校机房经常访问不到一些网站，学校自己搭建了一个域名服务器，发现域名不对就不给解析，这是一种拦截手段。拦截的话更多的是靠防火墙。自己的机器上 dns 可以设置，不设置默认是路由器的地址，有的路由器带有 dns 缓存功能,外部获取的 dns 信息缓存起来。

5. 本地域名服务器也可以是路由器，路由器没找到直接找根服务器，根服务器中找顶层服务器 ip ，再找权限域名服务器

6. 根服务器国内分配的少，全球分配300多台，美国分配的多，一台根域名服务器共享的人比较少，国内一台共享的人比较多，因此国内设备第一次上网访问很慢。

7. 授权域名服务器，简单说就是自己购买的域名登记 ip 的服务器。

8. 域名解析方式：*递归解析*和*迭代解析*相结合查询。

9. [6.2 详解DNS域名解析系统（域名、域名服务器[根、顶级、授权/权限、本地\]、域名解析过程[递归与迭代]）_根域名服务器_BitHachi的博客-CSDN博客](https://blog.csdn.net/weixin_43914604/article/details/105583806#SnippetTab)

----



# 面试题

请简述域名解析过程（百度）

> 参考答案：
>
> 1. 查找本机hosts文件中是否有解析记录，如果有，直接使用
> 2. 查找本地域名服务器中是否有解析记录，如果有，直接使用
> 3. 查询根域名服务器，得到顶级域名服务器ip
> 4. 查询顶级域名服务器中是否有解析记录，如果有，直接使用
> 5. 根据顶级域名服务器反馈的ip，查询权限域名服务器，如果有解析记录，直接使用
> 6. 如果以上都找不到，域名解析失败
>
> 本机和域名服务器一般都会有高速缓存，它存在的目的是为了减少查询次数和时间