(window.webpackJsonp=window.webpackJsonp||[]).push([[369],{749:function(t,n,a){"use strict";a.r(n);var e=a(10),i=Object(e.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"扩展-制作黑白图片"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#扩展-制作黑白图片"}},[t._v("#")]),t._v(" [扩展]制作黑白图片")]),t._v(" "),n("h2",{attrs:{id:"图片的处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#图片的处理"}},[t._v("#")]),t._v(" 图片的处理")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title>Document</title>\n</head>\n\n<body>\n    <div style="display: flex;">\n        <img src="https://qwq9527.gitee.io/resource/imgs/liao.jpg" alt="">\n        <button onclick="change()">转换</button>\n        <canvas width="100" height="117"></canvas>\n    </div>\n\n    <script>\n        /* 前置知识\n         * 1.画布中的1个图像是由多个像素点组成，每个像素点拥有4个数据：红、绿、蓝、alpha\n         * 2.把一个图像变成黑白，只需要将图像的每个像素点设置成为红绿蓝的平均数即可\n         * 3.当红绿蓝3种颜色相同的时候他是一个灰阶度，3个0是黑色，3个255是白色，3个颜色相同一起变化的话就在白色和黑色之间\n         * 不会存在其他明显的颜色出现\n         * 4.操作图像最好是将图像放到canvas操作，再从canvas得到像素信息，原始的图像，里面还包含其他信息，\n         *   比如元信息，图像类型、大小、宽高等\n         */\n\n        function change() {\n            const img = document.querySelector("img");\n            const cvs = document.querySelector("canvas");\n            const ctx = cvs.getContext("2d");\n// 从画布的左上角将图片完整的画下来\n            ctx.drawImage(img, 0, 0);\n            //得到画布某一个区域的图像信息\n            //前两个参数是矩形的左上角坐标，后两个参数是矩形的宽高\n            const imageData = ctx.getImageData(0, 0, img.width, img.height);\n            // imageData包含3个属性data:<Uint8ClampedArray>,height:number,width:number\n            // 其中类型化数组Uint8ClampedArray，可以理解成Uint8Array, 它的作用是专门处理图像数据溢出，\n            // 如果使用Uint8Array，需要自己处理溢出情况\n            console.log(imageData); \n            for (let i = 0; i < imageData.data.length; i += 4) {\n                //循环一个像素点\n                const r = imageData.data[i];\n                const g = imageData.data[i + 1];\n                const b = imageData.data[i + 2];\n                // 可能是小数，Uint8ClampedArray 会自动处理\n                const avg = (r + g + b) / 3;\n\n                imageData.data[i] = imageData.data[i + 1] = imageData.data[i + 2] = avg;\n            }\n            //将图像数据设置到画布\n            //第一个参数是数据，后面两个是相对画布的坐标\n            ctx.putImageData(imageData, 0, 0);\n        }\n    <\/script>\n</body>\n\n</html>\n')])])]),n("h2",{attrs:{id:"请求二进制数据"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#请求二进制数据"}},[t._v("#")]),t._v(" 请求二进制数据")]),t._v(" "),n("p",[n("strong",[t._v("开发时用ajax请求时，有时候服务器返回二进制的数据。")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title>Document</title>\n</head>\n\n<body>\n    <script>\n        async function test(){\n            const resp = await fetch("https://qwq9527.gitee.io/resource/imgs/liao.jpg")\n            // 需要用blob处理，blob是一个文件信息，size,type两个属性\n            const blob = await resp.blob();\n            // 还有一个方法arrayBuffer 返回一个promise,状态reslove后得到一个类型化数组\n            // 获取后发现里面数据变小了，是由于真实图片里面存的是经过压缩算法处理后的数据,\n            // 不会将每个像素点的信息都列出来，这样太大了，会将图片类似相同的信息进行合并，\n            // 不同格式的图片，压缩方式都不一样，存储信息都不一样，真实的文件里面数据量要少很多，\n            // 所以 bf数组里面还会出现一些负数，这是正常的\n            const bf = await blob.arrayBuffer();\n            // 图片信息bf拿到后，如果需要对二级制数据进行解析，就可以通过bf处理，\n            // 需要了解每种文件的格式，涉及到图片领域知识\n            // 类型化数组也可以设置偏移量\n            const arr = new Int8Array(bf, 3, 2);\n            console.log(arr)\n        }\n    <\/script>\n</body>\n\n</html>\n')])])])])}),[],!1,null,null,null);n.default=i.exports}}]);