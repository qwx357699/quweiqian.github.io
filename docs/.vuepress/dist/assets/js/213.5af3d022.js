(window.webpackJsonp=window.webpackJsonp||[]).push([[213],{586:function(t,a,s){"use strict";s.r(a);var n=s(10),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"yarn3-0-ts-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yarn3-0-ts-项目"}},[t._v("#")]),t._v(" yarn3.0 Ts 项目")]),t._v(" "),a("p",[t._v("您是否有兴趣将您的第一个 typescript 项目与 yarn 一起作为包管理器?\n然后，这里有一个快速的食谱，让你走上你的路。")]),t._v(" "),a("blockquote",[a("p",[t._v("此示例的所有源代码都可以在"),a("a",{attrs:{href:"https://github.com/rabiddroid/example-typescript-template",target:"_blank",rel:"noopener noreferrer"}},[t._v("github"),a("OutboundLink")],1),t._v("中。")])]),t._v(" "),a("h2",{attrs:{id:"安装-yarn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-yarn"}},[t._v("#")]),t._v(" 安装 yarn")]),t._v(" "),a("p",[t._v("安装 yarn 的首选方式是通过 copackack(一个帮助管理包管理器版本的实验性工具)。这是 node.js 自带的，取决于你的版本。在撰写本文时，我使用的版本是 v18.6.0。对于版本< 16.10 的节点，请参见 "),a("a",{attrs:{href:"https://yarnpkg.com/getting-started/install",target:"_blank",rel:"noopener noreferrer"}},[t._v("Yarn Install"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("blockquote",[a("p",[t._v("我强烈建议使用节点版本> 16.0.0 为了 yarn 3 如预期工作。")])]),t._v(" "),a("p",[t._v("创建项目文件夹(…并在一行中输入 🤓)")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" project-template-typescript "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$_")]),t._v("\n")])])]),a("p",[t._v("运行安装和初始化 yarn。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" init "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-2")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("**注意:*"),a("em",[t._v("默认情况下，"),a("code",[t._v("yarn init -2")]),t._v(" 会设置你的项目与 "),a("a",{attrs:{href:"https://yarnpkg.com/features/caching#zero-installs",target:"_blank",rel:"noopener noreferrer"}},[t._v("zero - install"),a("OutboundLink")],1),t._v(" 兼容，这需要检查存储库中的缓存;如果您想禁用此功能，请检查设置您的")]),t._v(".gitignore*文件。")])]),t._v(" "),a("p",[t._v("要查看基本的 yarn 项目状态，运行")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("也可以简单地运行“yarn”。")])]),t._v(" "),a("p",[t._v("文件夹内容如下所示")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n├ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("editorconfig\n├ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("git\n├ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gitignore\n├ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pnp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cjs\n├ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yarn\n├ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yarnrc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yml\n├ "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("README")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("md\n├ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n└ yarn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lock\n")])])]),a("p",[t._v("看到文件/文件夹的一些细节")]),t._v(" "),a("ul",[a("li",[t._v(".editorconfig\n"),a("a",{attrs:{href:"https://editorconfig.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://editorconfig.org/"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v(".pnp.cjs\n在这种安装模式下(默认从 Yarn 2.0 开始)，Yarn 生成一个 "),a("code",[t._v(".pnp.cjs")]),t._v(" 文件，而不是通常的包含各种包副本的"),a("code",[t._v("node_modules")]),t._v("文件夹。"),a("code",[t._v(".pnp.cjs")]),t._v(" 文件包含各种映射：一个映射将包名称和版本链接到它们在磁盘上的位置，另一个映射则将包名称与版本链接到依赖项列表。有了这些查找表，Yarn 可以立即告诉 Node 在哪里可以找到它需要访问的任何包，只要它们是依赖树的一部分，并且只要这个文件是在您的环境中加载的(下一节将详细介绍)"),a("a",{attrs:{href:"https://yarnpkg.com/features/pnp#fixing-node_modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("...细节"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v(".yarn\nyarn 产生的文件夹")]),t._v(" "),a("li",[t._v(".yarnrc.yml\n配置 Yarn 的内部设置。")]),t._v(" "),a("li",[t._v("package.json\n描述包管理器的项目详细信息和设置。")]),t._v(" "),a("li",[t._v("yarn.lock\n安装过程中的重要信息存储在 "),a("code",[t._v("yarn.lock")]),t._v(" 锁文件中，以便它可以在安装依赖项的每个系统之间共享。")])]),t._v(" "),a("h2",{attrs:{id:"安装-typescript"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-typescript"}},[t._v("#")]),t._v(" 安装 typescript")]),t._v(" "),a("p",[t._v("添加 typescript")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--dev")]),t._v(" typescript\n")])])]),a("p",[t._v("你可以选择启用 Yarn 的 "),a("a",{attrs:{href:"https://github.com/yarnpkg/berry/tree/master/packages/plugin-typescript",target:"_blank",rel:"noopener noreferrer"}},[t._v("TypeScript 插件"),a("OutboundLink")],1),t._v("，它可以帮助你自动管理"),a("code",[t._v("@types/*")]),t._v("依赖项。如果项目支持它，则在添加依赖项时自动安装类型定义。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" plugin "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" typescript\n")])])]),a("p",[t._v("可选地为 typescript 添加 VSCode 集成。按照额外的步骤让 VSCode 在工作空间中使用新的 typescript 版本。"),a("a",{attrs:{href:"https://yarnpkg.com/getting-started/editor-sdks",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://yarnpkg.com/getting-started/editor-sdks"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" dlx @yarnpkg/sdks vscode\n")])])]),a("p",[t._v("初始化 "),a("em",[t._v("tsconfig.json")]),t._v(" 基本设置")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" tsc "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--init")]),t._v("\n")])])]),a("h2",{attrs:{id:"运行代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行代码"}},[t._v("#")]),t._v(" 运行代码")]),t._v(" "),a("p",[t._v("让我们运行第一个代码。\n在 "),a("code",[t._v("<project_root>/src")]),t._v(" 目录下创建 index.ts 文件\n添加如下代码")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("为了保持简单明了，而不必将其编译为 javascript，让我们使用 "),a("strong",[t._v("ts-node")]),t._v(" 运行它。\n将 ts-node 和依赖项 "),a("code",[t._v("@types/node")]),t._v(" 添加到项目中:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" ts-node @types/node "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--dev")]),t._v("\n")])])]),a("p",[t._v("在项目根目录运行如下命令：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" ts-node src/index.ts\n")])])]),a("p",[t._v("您应该在控制台上看到以下内容。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" ts-node src/index.ts\nhello world"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),a("p",[t._v("祝贺你建立了你的第一个 typescript 项目。祝你编程之旅愉快!")]),t._v(" "),a("h2",{attrs:{id:"文章来源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文章来源"}},[t._v("#")]),t._v(" 文章来源")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.jeffreythomas.dev/typescript/yarn/yarn3/nodejs/2022/08/01/typescript-project-yarn-3.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jeffreythomas.dev/typescript/yarn/yarn3/nodejs/2022/08/01/typescript-project-yarn-3.html"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);