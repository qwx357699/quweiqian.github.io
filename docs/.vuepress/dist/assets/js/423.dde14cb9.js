(window.webpackJsonp=window.webpackJsonp||[]).push([[423],{791:function(t,s,v){"use strict";v.r(s);var _=v(10),e=Object(_.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"webpack-编译过程-ignore"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-编译过程-ignore"}},[t._v("#")]),t._v(" webpack 编译过程 {ignore}")]),t._v(" "),s("p",[t._v("[toc]")]),t._v(" "),s("p",[t._v("webpack 的作用是将源代码编译（构建、打包）成最终代码")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/2020-01-09-10-26-15.png",alt:""}})]),t._v(" "),s("p",[t._v("整个过程大致分为三个步骤")]),t._v(" "),s("ol",[s("li",[t._v("初始化")]),t._v(" "),s("li",[t._v("编译")]),t._v(" "),s("li",[t._v("输出")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/2020-01-09-10-53-28.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"初始化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化"}},[t._v("#")]),t._v(" 初始化")]),t._v(" "),s("p",[t._v("此阶段，webpack会将"),s("strong",[t._v("CLI参数")]),t._v("、"),s("strong",[t._v("配置文件")]),t._v("、"),s("strong",[t._v("默认配置")]),t._v("进行融合，形成一个最终的配置对象。")]),t._v(" "),s("p",[t._v("对配置的处理过程是依托一个第三方库"),s("code",[t._v("yargs")]),t._v("完成的")]),t._v(" "),s("p",[t._v("此阶段相对比较简单，主要是为接下来的编译阶段做必要的准备")]),t._v(" "),s("p",[t._v("目前，可以简单的理解为，初始化阶段主要用于"),s("strong",[t._v("产生一个最终的配置")])]),t._v(" "),s("h2",{attrs:{id:"编译"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译"}},[t._v("#")]),t._v(" 编译")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("创建chunk")])])]),t._v(" "),s("p",[t._v("chunk是webpack在内部构建过程中的一个概念，译为"),s("code",[t._v("块")]),t._v("，它表示通过某个入口找到的所有依赖的统称。")]),t._v(" "),s("p",[t._v("根据入口模块（默认为"),s("code",[t._v("./src/index.js")]),t._v("）创建一个chunk")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/2020-01-09-11-54-08.png",alt:""}})]),t._v(" "),s("p",[t._v("每个chunk都有至少两个属性：")]),t._v(" "),s("ul",[s("li",[t._v("name：默认为main")]),t._v(" "),s("li",[t._v("id：唯一编号，开发环境和name相同，生产环境是一个数字，从0开始")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("strong",[t._v("构建所有依赖模块")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/2020-01-09-12-32-38.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("AST在线测试工具：https://astexplorer.net/")])]),t._v(" "),s("p",[t._v("简图")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/2020-01-09-12-35-05.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("strong",[t._v("产生chunk assets")])])]),t._v(" "),s("p",[t._v("在第二步完成后，chunk中会产生一个模块列表，列表中包含了"),s("strong",[t._v("模块id")]),t._v("和"),s("strong",[t._v("模块转换后的代码")])]),t._v(" "),s("p",[t._v("接下来，webpack会根据配置为chunk生成一个资源列表，即"),s("code",[t._v("chunk assets")]),t._v("，资源列表可以理解为是生成到最终文件的文件名和文件内容")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/2020-01-09-12-39-16.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("chunk hash是根据所有chunk assets的内容生成的一个hash字符串\nhash：一种算法，具体有很多分类，特点是将一个任意长度的字符串转换为一个固定长度的字符串，而且可以保证原始内容不变，产生的hash字符串就不变")])]),t._v(" "),s("p",[t._v("简图")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/2020-01-09-12-43-52.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[s("strong",[t._v("合并chunk assets")])])]),t._v(" "),s("p",[t._v("将多个chunk的assets合并到一起，并产生一个总的hash")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/2020-01-09-12-47-43.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"输出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出"}},[t._v("#")]),t._v(" 输出")]),t._v(" "),s("p",[t._v("此步骤非常简单，webpack将利用node中的fs模块（文件处理模块），根据编译产生的总的assets，生成相应的文件。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/2020-01-09-12-54-34.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"总过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总过程"}},[t._v("#")]),t._v(" 总过程")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/2020-01-09-15-51-07.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/2020-01-09-12-32-38.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("涉及术语")])]),t._v(" "),s("ol",[s("li",[t._v("module：模块，分割的代码单元，webpack中的模块可以是任何内容的文件，不仅限于JS")]),t._v(" "),s("li",[t._v("chunk：webpack内部构建模块的块，一个chunk中包含多个模块，这些模块是从入口模块通过依赖分析得来的")]),t._v(" "),s("li",[t._v("bundle：chunk构建好模块后会生成chunk的资源清单，清单中的每一项就是一个bundle，可以认为bundle就是最终生成的文件")]),t._v(" "),s("li",[t._v("hash：最终的资源清单所有内容联合生成的hash值")]),t._v(" "),s("li",[t._v("chunkhash：chunk生成的资源清单内容联合生成的hash值")]),t._v(" "),s("li",[t._v("chunkname：chunk的名称，如果没有配置则使用main")]),t._v(" "),s("li",[t._v("id：通常指chunk的唯一编号，如果在开发环境下构建，和chunkname相同；如果是生产环境下构建，则使用一个从0开始的数字进行编号")])])])}),[],!1,null,null,null);s.default=e.exports}}]);