(window.webpackJsonp=window.webpackJsonp||[]).push([[215],{590:function(t,v,_){"use strict";_.r(v);var s=_(10),r=Object(s.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"ip数据报文"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ip数据报文"}},[t._v("#")]),t._v(" IP数据报文")]),t._v(" "),v("h2",{attrs:{id:"ip数据报"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ip数据报"}},[t._v("#")]),t._v(" IP数据报")]),t._v(" "),v("p",[v("strong",[t._v("IP协议提供不可靠无连接的数据报传输服务")]),t._v("，P层提供的服务是通过P层对数据报的封装与拆封来实现的。"),v("strong",[t._v("IP数据报的格式分为报头区和数据区两大部分")]),t._v("，其中报头区是为了正确传输高层数据而加的各种控制信息，数据区包括高层协议需要传输的数据。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/1701678486882.png",alt:"1701678486882"}})]),t._v(" "),v("ol",[v("li",[t._v("版本号："),v("strong",[t._v("占用4位二进制数，表示该IP数据报使用的IP协议版本")]),t._v("。目前Internet使用的主要是TCP/IP\n协议族中版本号为4的IP协议。")]),t._v(" "),v("li",[t._v("头长度：占用4位二进制位，"),v("strong",[t._v("此域指出整个报头的长度")]),t._v("（包括选项），该长度是以32位二进制数为一个计数单位的，接收端通过此域可以计算出报头在何处结束及从何处开始读数据。"),v("strong",[t._v("普通IP数据报（没有任何选项)该字段的值是5（即20个字节的长度）")]),t._v("。")]),t._v(" "),v("li",[t._v("服务类型(TOS、type of service)：占用8位二进制位，用于规定本数据报的处理方式。服务类型\n字段的8位分成了5个子域：\n"),v("strong",[t._v("目前在Internet中使用的TCP/IP协议大多数情况下网络并未对TOS进行处理。")])])]),t._v(" "),v("ol",{attrs:{start:"4"}},[v("li",[v("p",[t._v("片总长度：占用16位二进制位，"),v("strong",[t._v("总长度字段是指整个IP数据报的长度（报头区+数据区）")]),t._v("，以字节为单位。利用头部长度字段和总长度字段就可以计算出P数据报中数据内容的起始位置和长度。由于该字段长度为16位二进制数，因此理论上P数据报最长可达65536个字节（事实上受物理网络的限制，要比这个数值小很多)。")])]),t._v(" "),v("li",[v("p",[t._v("生存时间(TTL,time to live)：占用8位二进制位，它指定了数据报可以在网络中传输的最长时\n间。实际应用中把生存时间字段设置成了数据报可以经过的最大路由器数。"),v("strong",[t._v("TTL的初始值由源主机设置(通常为32、64、128或256)，一旦经过一个处理它的路由器，它的值就减1。"),v("strong",[t._v("当该字段为0时，数据报就丢弃，并发送CMP报文通知源主机，因此可以")]),t._v("防止进入一个循环回路")]),t._v("时，数据报无休止地传输下去。")])]),t._v(" "),v("li",[v("p",[t._v("上层协议标识：占用8位二进制位，IP协议可以承载各种上层协议，目标端根据协议标识就可以把收\n到的IP数据报送到TCP或UDP等处理此报文的上层协议了。")])])]),t._v(" "),v("p",[v("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/1701679081666.png",alt:"1701679081666"}})]),t._v(" "),v("ol",{attrs:{start:"7"}},[v("li",[t._v("校验和："),v("strong",[t._v("占用16位二进制数，用于协议头数据有效性的校验")]),t._v("，可以保证P报头区在传输时的正确性和\n完整性。头部检验和字段是根据P协议头计算出的检验和，它不对头部后面的数据进行计算。\n原理：发送端首先将检验和字段置0，然后对头部中每16位二进制数进行反码求和的运算，并将结果存在校验和字段中。由于接收方在计算过程中包含了发送方放在头部的校验和，因此，如果头部在传输过程中没有发生任何差错，那么接收方计算的结果应该是全1。")]),t._v(" "),v("li",[t._v("源地址：占用32位二进制数，表示发送端IP地址。")]),t._v(" "),v("li",[t._v("目的地址：占用32位二进制数，表述目的端IP地址。")])]),t._v(" "),v("h2",{attrs:{id:"ip-数据包分片和重组"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ip-数据包分片和重组"}},[t._v("#")]),t._v(" IP 数据包分片和重组")]),t._v(" "),v("p",[t._v("**IP数据报在查联网上传输时，可能要经过多个物理网络才能从源端传输到目的端。**不同的网络由于链路层和介质的物理特性不同，因此在进行数据传输时，对数据帧的最大长度都有一个限制，这个限制值即\n"),v("strong",[t._v("最大传输单元MTU")]),t._v("(Maximum Transmission Unit)")]),t._v(" "),v("p",[t._v("同一个网络上的两台主机之间通信时，该网络的MTU值是确定的，不存在分片问题。分片问题一般只存\n在于具有不同MTU值的互联网中。"),v("strong",[t._v("由于现在互联网主要使用路由器进行网络连接，因此分片工作通常由")]),t._v(" "),v("strong",[t._v("路由器负责")]),t._v("。")]),t._v(" "),v("p",[t._v("在编程的时候，不用管分片问题。")]),t._v(" "),v("p",[t._v("当两台主机之间的通信要通过多个具有不同MTU值的网络时，MTU的瓶颈是通信路径上最小的MTU值，\n它被称为"),v("strong",[t._v("路径MTU")]),t._v("。"),v("strong",[t._v("由于路由选择不一定是对称的（从A到B的路由可能与从B到A的路由不同）")]),t._v("，因此，路径MTU在两个方向上不一定是一致的，下表是几种常用网络的MTU值：")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/1701679532488.png",alt:"1701679532488"}})]),t._v(" "),v("p",[v("strong",[t._v("分片：")]),t._v("\n把一个数据报为了适合网络传输而分成多个数据报的过称为"),v("strong",[t._v("分片")]),t._v("，被分片后的各个IP数据报可能经过不同的路径到达目标主机，这些被分片后的数据包也叫"),v("strong",[t._v("数据帧")]),t._v("。\n一个IP数据报在传输过程中可能被分片，也可能不被分片。如果被分片，"),v("strong",[t._v("分片后的IP数据报和原来没有")]),t._v(" "),v("strong",[t._v("分片的IP数据报结构是相同的")]),t._v("，即也是由IP头部和IP数据区两个部分组成：")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs/1701679755968.png",alt:"1701679755968"}})]),t._v(" "),v("p",[v("strong",[t._v("重组：")]),t._v("\n当分了片的IP数据报到达最终目标主机时，目标主机对各分片进行组装，恢复成源主机发送时的P数据报，这个过程叫做IP数据报的重组。")]),t._v(" "),v("p",[v("em",[t._v("路由器就是快递公司。")])])])}),[],!1,null,null,null);v.default=r.exports}}]);