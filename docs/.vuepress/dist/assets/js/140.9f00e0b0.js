(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{513:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"分页电影列表案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分页电影列表案例"}},[t._v("#")]),t._v(" 分页电影列表案例")]),t._v(" "),s("blockquote",[s("p",[t._v("效果展示地址：https://study.duyiedu.com/movie")]),t._v(" "),s("p",[t._v("接口地址：http://mock.duyiedu.com/project/72/interface/api/234")])]),t._v(" "),s("h2",{attrs:{id:"功能模块划分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#功能模块划分"}},[t._v("#")]),t._v(" 功能模块划分")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20210510105351.png",alt:"image-20210510105351710"}})]),t._v(" "),s("h2",{attrs:{id:"分包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分包"}},[t._v("#")]),t._v(" 分包")]),t._v(" "),s("p",[t._v("如果站点中的所有依赖都打包到一个js文件中，势必会导致打包结果过大")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20210510110356.png",alt:"image-20210510110356818"}})]),t._v(" "),s("p",[t._v("而实际上，在页面初始的时候，不需要那么多代码参与运行。")]),t._v(" "),s("p",[t._v("比如在这个项目中，一开始必须要运行的只有封面模块，因为它是用户一开始就必须要能够看见的。而电影模块可以慢慢加载。")]),t._v(" "),s("p",[t._v("基于此，我们可以使用动态导入的方式加载电影模块")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./cover'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 静态导入，表示初始就必须要依赖 cover 模块")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./movie'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 动态导入，表示运行到此代码时才会去远程加载 movie 模块")]),t._v("\n")])])]),s("p",[t._v("webpack能够识别动态导入的代码，当它发现某个模块是使用动态导入时，该模块会单独形成打包结果")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20210510110909.png",alt:"image-20210510110909513"}})]),t._v(" "),s("p",[t._v("在浏览器运行时，会首先加载初始的打包结果，然后在后续的运行过程中，动态加载其他模块。这样就可以尽量提升初始加载效率，又不影响后续模块的加载")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20210510111343.png",alt:"image-20210510111343103"}})]),t._v(" "),s("h2",{attrs:{id:"跨域代理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跨域代理"}},[t._v("#")]),t._v(" 跨域代理")]),t._v(" "),s("p",[s("strong",[t._v("大部分时候，为了安全，服务器都是不允许跨域访问的")])]),t._v(" "),s("p",[t._v("所以，将来部署应用的时候，通常会使用下面的方式进行部署")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20210510123323.png",alt:"image-20210510123323486"}})]),t._v(" "),s("p",[t._v("你无须彻底理解上图，只需要知道："),s("strong",[t._v("最终部署之后，不存在跨域问题")])]),t._v(" "),s("p",[t._v("但是，"),s("strong",[t._v("跨域问题在开发阶段是存在的")]),t._v("！")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20210510123752.png",alt:"image-20210510123708048"}})]),t._v(" "),s("p",[t._v("所以，我们要做的，"),s("strong",[t._v("仅仅是消除开发阶段的跨域问题，便于在开发阶段查看效果")])]),t._v(" "),s("p",[t._v("如何实现：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("在"),s("code",[t._v("webpack.config.js")]),t._v("中，找到下面的部分，设置代理")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devServer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("proxy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'/api'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当请求地址以 api 开头时，代理到另一个地址")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://study.duyiedu.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 代理的目标地址")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("changeOrigin")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 更改请求头中的host，无须深究，为避免出问题，最好写上")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("在"),s("code",[t._v("ajax")]),t._v("请求时，仅需给上请求路径即可")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("axios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://study.duyiedu.com/api/movies'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ❌ 无须指定源")]),t._v("\naxios"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api/movies'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("； "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ✅")]),t._v("\n")])])])])]),t._v(" "),s("p",[t._v("来看看这样做的效果是什么")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20210510124724.png",alt:"image-20210510124724077"}})]),t._v(" "),s("p",[t._v("这样一来，在跨域问题上，就做到了"),s("strong",[t._v("开发环境和生产环境的统一")])]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20210510125000.png",alt:"image-20210510125000499"}})]),t._v(" "),s("h2",{attrs:{id:"电影模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#电影模块"}},[t._v("#")]),t._v(" 电影模块")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20210510134430.png",alt:"image-20210510134430136"}})]),t._v(" "),s("h3",{attrs:{id:"list模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#list模块"}},[t._v("#")]),t._v(" list模块")]),t._v(" "),s("p",[t._v("该模块很简单，按照下面的思路实现即可")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 初始化函数，负责创建容器\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 根据传入的电影数组，创建元素，填充到容器中\n * @params movies 电影数组\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createMovieTags")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("movies")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"pager模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pager模块"}},[t._v("#")]),t._v(" pager模块")]),t._v(" "),s("p",[t._v("该模块整体思路如下：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 初始化函数，负责创建容器\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 根据传入的页码、页容量、总记录数，创建分页区域的标签\n * @params page 页码\n * @params limit 页容量\n * @params total 总页数\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPagers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("page"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" limit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" total")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h5",{attrs:{id:"createpagers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#createpagers"}},[t._v("#")]),t._v(" createPagers")]),t._v(" "),s("p",[t._v("该函数的实现可以按照下面的思路进行")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 根据传入的页码、页容量、总记录数，创建分页区域的标签\n * @params page 页码\n * @params limit 页容量\n * @params total 总页数\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPagers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("page"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" limit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" total")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n   * 辅助函数，负责帮忙创建一个页码标签\n   * @params text 标签的文本\n   * @params status 标签的状态，空字符串-普通状态，disabled-禁用状态，active-选中状态\n   */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTag")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" status"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" targetPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. 创建首页标签")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2. 创建上一页标签")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//3. 创建数字页码标签")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//4. 创建下一页标签")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//5. 创建尾页标签")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);