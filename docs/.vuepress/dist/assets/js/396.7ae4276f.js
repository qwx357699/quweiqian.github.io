(window.webpackJsonp=window.webpackJsonp||[]).push([[396],{762:function(a,t,s){"use strict";s.r(t);var e=s(10),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"区分环境-ignore"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#区分环境-ignore"}},[a._v("#")]),a._v(" 区分环境 {ignore}")]),a._v(" "),t("p",[a._v("[toc]")]),a._v(" "),t("p",[a._v("有些时候，我们需要针对生产环境和开发环境分别书写webpack配置")]),a._v(" "),t("p",[a._v("为了更好的适应这种要求，webpack允许配置不仅可以是一个对象，还可以是一个"),t("strong",[a._v("函数")])]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("exports")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("env")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//配置内容")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("在开始构建时，webpack如果发现配置是一个函数，会调用该函数，将函数返回的对象作为配置内容，因此，开发者可以根据不同的环境返回不同的对象")]),a._v(" "),t("p",[a._v("在调用webpack函数时，webpack会向函数传入一个参数env，该参数的值来自于webpack命令中给env指定的值，例如")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("npx webpack "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env")]),a._v(" abc "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# env: "abc"')]),a._v("\n\nnpx webpack "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env.abc")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# env: {abc:true}")]),a._v("\nnpx webpack "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env.abc")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# env： {abc:1}")]),a._v("\nnpx webpack "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env.abc")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--env.bcd")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# env: {abc:1, bcd:2}")]),a._v("\n")])])]),t("p",[a._v("这样一来，我们就可以在命令中指定环境，在代码中进行判断，根据环境返回不同的配置结果。")])])}),[],!1,null,null,null);t.default=n.exports}}]);