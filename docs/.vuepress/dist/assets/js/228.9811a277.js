(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{603:function(t,e,s){"use strict";s.r(e);var a=s(10),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[t._v("#")]),t._v(" 命令")]),t._v(" "),e("p",[t._v("关于yarn全局安装找不到命令问题")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("nvm")]),t._v("安装时，自己手动选择了"),e("code",[t._v("D:/nodejs")]),t._v(" 目录，"),e("code",[t._v("nvm")]),t._v("的做法是将这个目录做成了快捷方式，切换版本时，目录实际的指向是对应版的"),e("code",[t._v("nodejs")]),t._v("目录")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("D：/nodejs")]),t._v("在 "),e("code",[t._v("nvm")]),t._v(" 安装时，已经安装到了系统的环境变量中。")])]),t._v(" "),e("li",[e("p",[t._v("运行命令时，系统通过环境变量中提供的路径查找是否有该命令。windows 默认能执行哪些文件命令呢？"),e("code",[t._v("cmd,bat,js.exe")]),t._v("等。试了下，在"),e("code",[t._v("D：/nodejs")]),t._v(" 建了个"),e("code",[t._v("aaaa.bat")]),t._v("的文件。命令行输入 "),e("code",[t._v("aaaa")]),t._v("就能执行，有效果。")]),t._v(" "),e("div",{staticClass:"language-bat extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("@echo off\necho test1\necho test2\nend\npause\n")])])])]),t._v(" "),e("li",[e("p",[t._v("问题")]),t._v(" "),e("h2",{attrs:{id:"yarn-bat"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#yarn-bat"}},[t._v("#")]),t._v(" yarn.bat")])])]),t._v(" "),e("div",{staticClass:"language-bat extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('## 表示所有命令运行后不在控制台显示\n@ECHO off \n\nSETLOCAL\nCALL :find_dp0\n\nIF EXIST "%dp0%\\node.exe" (\n  SET "_prog=%dp0%\\node.exe"\n) ELSE (\n  SET "_prog=node"\n  SET PATHEXT=%PATHEXT:;.JS;=;%\n)\n\n"%_prog%"  "%dp0%\\node_modules\\yarn\\bin\\yarn.js" %*\nENDLOCAL\nEXIT /b %errorlevel%\n:find_dp0\nSET dp0=%~dp0\nEXIT /b\n\n')])])]),e("h3",{attrs:{id:"setlocal、endlocal"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setlocal、endlocal"}},[t._v("#")]),t._v(" setlocal、endlocal")]),t._v(" "),e("p",[e("code",[t._v("setlocal")]),t._v("和"),e("code",[t._v("endlocal")]),t._v("命令执行结果是让中间的程序对于系统变量的改变只在程序内起作用，不会影响整个系统级别。")]),t._v(" "),e("div",{staticClass:"language-bat extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("@echo off\nsetlocal\npath=d:\\\necho 局部环境变量path值\nset path\nendlocal\necho 系统环境变量path的值\nset path\n")])])]),e("p",[t._v("在第二行"),e("code",[t._v("setlocal")]),t._v("之后，第三行对于变量path进行了赋值，第四行就是显示一下该值。在第六行"),e("code",[t._v("endlocal")]),t._v("后，重新显示一下系统变量path（第七行），会发现仍然是程序运行之前的path值，没有被程序改变。")]),t._v(" "),e("h2",{attrs:{id:"dp0的含义"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dp0的含义"}},[t._v("#")]),t._v(" %~dp0的含义")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("序号")]),t._v(" "),e("th",[t._v("符号")]),t._v(" "),e("th",[t._v("含义")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("1")]),t._v(" "),e("td",[t._v("~")]),t._v(" "),e("td",[t._v("是扩展的意思，"),e("strong",[t._v("变量扩充(下面详细介绍)")]),t._v("，相当于把一个相对路径转换绝对路径")])]),t._v(" "),e("tr",[e("td",[t._v("2")]),t._v(" "),e("td",[t._v("%0")]),t._v(" "),e("td",[t._v('代指批处理文件自身（绝对路径 "D:\\test\\bat\\test.bat"，注意有双引号）')])]),t._v(" "),e("tr",[e("td",[t._v("3")]),t._v(" "),e("td",[t._v("%~d0")]),t._v(" "),e("td",[t._v("是指批处理所在的盘符，其中d代表drive。(扩充到盘符 D: )")])]),t._v(" "),e("tr",[e("td",[t._v("4")]),t._v(" "),e("td",[t._v("%~p0")]),t._v(" "),e("td",[t._v("是指批处理所在的目录，其中p代表path。(扩充到路径 \\test\\bat\\ ）")])]),t._v(" "),e("tr",[e("td",[t._v("5")]),t._v(" "),e("td",[t._v("%~dp0")]),t._v(" "),e("td",[t._v("是批处理所在的盘符加路径。（扩充到盘符和路径 ：D:\\test\\bat\\）")])]),t._v(" "),e("tr",[e("td",[t._v("6")]),t._v(" "),e("td",[t._v("cd %~dp0")]),t._v(" "),e("td",[t._v("就是进入批处理所在目录了")])])])]),t._v(" "),e("div",{staticClass:"language-bat extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("@echo off\necho 当前盘符：%~d0\necho 当前路径：%~p0\necho 当前盘符和路径：%~dp0\necho 当前批处理(%0文件)全路径：%~f0\necho 当前盘符和路径的短文件名格式：%~sdp0\necho 当前CMD默认目录：%cd%\npause\n")])])]),e("div",{staticClass:"language-tex extra-class"},[e("pre",{pre:!0,attrs:{class:"language-tex"}},[e("code",[t._v("C:"),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\Users")]),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\1")]),t._v("2181"),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\Desktop")]),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\yarn")]),t._v(">sbsb\n当前盘符：D:\n当前路径："),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\nodejs")]),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\\n")]),t._v("当前盘符和路径：D:"),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\nodejs")]),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\\n")]),t._v("当前批处理(sbsb文件)全路径：D:"),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\nodejs")]),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\sbsb")]),t._v(".bat\n当前盘符和路径的短文件名格式：D:"),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\nodejs")]),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\\n")]),t._v("当前CMD默认目录：C:"),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\Users")]),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\1")]),t._v("2181"),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\Desktop")]),e("span",{pre:!0,attrs:{class:"token function selector"}},[t._v("\\yarn")]),t._v("\n请按任意键继续. . .\n")])])]),e("p",[e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm scripts 使用指南 - 阮一峰的网络日志 (ruanyifeng.com)"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"exit-b"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#exit-b"}},[t._v("#")]),t._v(" EXIT /b")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("EXIT [/B] [exitCode]\n\n  /B          指定要退出当前批处理脚本而不是 CMD.EXE。如果从一个\n              批处理脚本外执行，则会退出 CMD.EXE\n\n  exitCode    指定一个数字号码。如果指定了 /B，将 ERRORLEVEL\n              设成那个数字。如果退出 CMD.EXE，则用那个数字设置\n              过程退出代码。\n")])])]),e("p",[t._v("命令概括：\nexit，意为“退出”；\n"),e("strong",[t._v("/b，全英文batch（不确定）；")]),t._v("\ncode，意为“代码”，exitcode就是“退出码”；")])])}),[],!1,null,null,null);e.default=n.exports}}]);