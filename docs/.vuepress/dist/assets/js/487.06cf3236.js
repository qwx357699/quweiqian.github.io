(window.webpackJsonp=window.webpackJsonp||[]).push([[487],{858:function(t,e,l){"use strict";l.r(e);var a=l(10),s=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"devtool-配置-ignore"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#devtool-配置-ignore"}},[t._v("#")]),t._v(" devtool 配置 {ignore}")]),t._v(" "),e("p",[t._v("[toc]")]),t._v(" "),e("h2",{attrs:{id:"source-map-源码地图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#source-map-源码地图"}},[t._v("#")]),t._v(" source map 源码地图")]),t._v(" "),e("blockquote",[e("p",[t._v("本小节的知识与 webpack 无关")])]),t._v(" "),e("p",[t._v("前端发展到现阶段，很多时候都不会直接运行源代码，可能需要对源代码进行合并、压缩、转换等操作，真正运行的是转换后的代码")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs//2020-01-08-16-38-26.png",alt:""}})]),t._v(" "),e("p",[t._v("这就给调试带来了困难，因为当运行发生错误的时候，我们更加希望能看到源代码中的错误，而不是转换后代码的错误")]),t._v(" "),e("blockquote",[e("p",[t._v("jquery压缩后的代码：https://code.jquery.com/jquery-3.4.1.min.js")])]),t._v(" "),e("p",[t._v("为了解决这一问题，chrome浏览器率先支持了source map，其他浏览器纷纷效仿，目前，几乎所有新版浏览器都支持了source map")]),t._v(" "),e("p",[t._v("source map实际上是一个配置，配置中不仅记录了所有源码内容，还记录了和转换后的代码的对应关系")]),t._v(" "),e("p",[t._v("下面是浏览器处理source map的原理")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs//2020-01-08-16-58-06.png",alt:""}})]),t._v(" "),e("p",[e("img",{attrs:{src:"https://qwq9527.gitee.io/resource/imgs//2020-01-08-17-01-13.png",alt:""}})]),t._v(" "),e("p",[e("strong",[t._v("最佳实践")]),t._v("：")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("source map 应在开发环境中使用，作为一种调试手段")])]),t._v(" "),e("li",[e("p",[t._v("source map 不应该在生产环境中使用，source map的文件一般较大，不仅会导致额外的网络传输，还容易暴露原始代码。即便要在生产环境中使用source map，用于调试真实的代码运行问题，也要做出一些处理规避网络传输和代码暴露的问题。")]),t._v(" "),e("blockquote",[e("p",[t._v("理解是：生产环境真出现问题，可以将map文件传上去（或者打包时直接带上），只有例如管理员请求才有 source map，服务端需要处理，一般用户不给返回map。")])])])]),t._v(" "),e("h2",{attrs:{id:"webpack中的source-map"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack中的source-map"}},[t._v("#")]),t._v(" webpack中的source map")]),t._v(" "),e("p",[t._v("使用 webpack 编译后的代码难以调试，可以通过 devtool 配置来"),e("strong",[t._v("优化调试体验")])]),t._v(" "),e("p",[t._v("具体的配置见文档：https://www.webpackjs.com/configuration/devtool/")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("devtool")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("build")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("rebuild")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("production")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("quality")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("(none)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("fastest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("fastest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("yes")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("bundled code")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("eval")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("fastest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("fastest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("no")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("generated code")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("cheap-eval-source-map")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("fast")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("faster")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("no")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("transformed code (lines only)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("cheap-module-eval-source-map")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slow")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("faster")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("no")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("original source (lines only)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("eval-source-map")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slowest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("fast")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("no")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("original source")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("cheap-source-map")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("fast")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slow")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("yes")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("transformed code (lines only)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("cheap-module-source-map")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slow")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slower")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("yes")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("original source (lines only)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("inline-cheap-source-map")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("fast")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slow")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("no")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("transformed code (lines only)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("inline-cheap-module-source-map")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slow")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slower")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("no")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("original source (lines only)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("source-map")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slowest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slowest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("yes")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("original source")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("inline-source-map")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slowest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slowest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("no")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("original source")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("hidden-source-map")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slowest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slowest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("yes")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("original source")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("nosources-source-map")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slowest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("slowest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("yes")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("without source content")])])])]),t._v(" "),e("ol",[e("li",[e("p",[t._v("(none) 加括号表示默认配置，品质：打包后的代码。无源码地图。")])]),t._v(" "),e("li",[e("p",[t._v("eval 打包后，带 sourceURL，开发环境默认值")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("module"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exports"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_require__")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("eval")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__webpack_require__(1)\\nconsole.log(\"index module\")\\n\\n//# sourceURL=webpack:///./src/index.js?'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])])]),t._v(" "),e("p",[t._v("这些没必要看完，影响范围窄，直接看文档的最佳实践。也就是官网中对于开发环境对于生产环境如何如何。")]),t._v(" "),e("ol",[e("li",[t._v("eval 编译快，但是如 "),e("code",[t._v("requrie")]),t._v(" 被转换了 "),e("code",[t._v("__webpack_require")]),t._v(";")]),t._v(" "),e("li",[e("code",[t._v("eval-source-map")]),t._v(" 这个意思是打包后，体积变大，将源码地图变成base64位加进去")]),t._v(" "),e("li",[e("code",[t._v("eval-cheap-source-map")]),t._v(" 这种方式只映射行，不映射列。报错没那么准确。")]),t._v(" "),e("li",[t._v("生产环境"),e("code",[t._v("hidden-source-map")]),t._v(" 这种打包后生成 map 文件，但是 js 代码中没有 引用注释"),e("code",[t._v("//#sourceMap")]),t._v(" ,有些工具可以读取")])])])}),[],!1,null,null,null);e.default=s.exports}}]);