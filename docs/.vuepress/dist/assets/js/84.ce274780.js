(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{403:function(t,s,a){"use strict";a.r(s);var n=a(10),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异常"}},[t._v("#")]),t._v(" 异常")]),t._v(" "),s("blockquote",[s("p",[t._v("本节课的重点是"),s("strong",[t._v("异常的分类")])]),t._v(" "),s("p",[t._v("剩余两部分的知识，绝大部分情况下都用不到，除非你要写一些 "),s("em",[t._v("高端")]),t._v(" 的代码")])]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20211222175234.png",alt:"image-20211222175234095"}})]),t._v(" "),s("p",[s("strong",[t._v("异常并非坏事，它可以让开发人员及时发现错误、定位错误，甚至在某些时候，我们还需要故意的抛出异常")])]),t._v(" "),s("h2",{attrs:{id:"异常的分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异常的分类"}},[t._v("#")]),t._v(" 异常的分类")]),t._v(" "),s("p",[t._v("在JS中，异常表现为一个对象，不同的对象表达了不同的异常类型，不同类型的异常对应到不同的错误")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("异常类型")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("SyntaxError")])]),t._v(" "),s("td",[t._v("语法错误")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("ReferenceError")])]),t._v(" "),s("td",[t._v("引用错误，往往是使用了未定义的变量或函数")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("TypeError")])]),t._v(" "),s("td",[t._v("类型错误，往往是使用了一个对象中不存在的成员")])])])]),t._v(" "),s("p",[s("strong",[t._v("每个异常都是一个对象，通过对应的构造函数创建")])]),t._v(" "),s("blockquote",[s("p",[t._v("所有的异常构造器都继承自Error，更多信息参见"),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Error",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("当代码运行过程中出现错误时，JS会：")]),t._v(" "),s("ol",[s("li",[t._v("自动创建对应的异常对象，抛出错误")]),t._v(" "),s("li",[t._v("程序终止运行")]),t._v(" "),s("li",[t._v("控制台中会显示异常对象")])]),t._v(" "),s("p",[t._v("每个异常对象都至少记录了"),s("strong",[t._v("两个关键信息")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("错误消息描述：描述异常出现的原因")]),t._v(" "),s("li",[t._v("调用堆栈信息：描述异常出现的位置")])]),t._v(" "),s("h2",{attrs:{id:"捕获异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#捕获异常"}},[t._v("#")]),t._v(" 捕获异常")]),t._v(" "),s("p",[t._v("捕获异常就是处理错误，当错误发生后，我们对错误进行相应的处理，让程序不至于终止")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 代码1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 代码2：当代码1出现异常后，会执行这里的代码，异常对象会传递给err")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 代码3：可省略。无论是否有异常，都会执行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 无异常的执行顺序：代码1 --\x3e 代码3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 有异常的执行顺序：代码1 --\x3e 出现异常，中断代码1的执行 --\x3e 代码2 --\x3e 代码3")]),t._v("\n")])])]),s("p",[s("strong",[t._v("在绝大部分时候，我们都无须捕获异常，除非满足以下要求：")])]),t._v(" "),s("ol",[s("li",[t._v("我们能够预知某段代码会出现异常")]),t._v(" "),s("li",[t._v("我们知道出现异常后要做什么")])]),t._v(" "),s("p",[t._v("上面的条件任意一个不满足，都不应该处理异常")]),t._v(" "),s("p",[s("strong",[t._v("永远不能为了不报错而捕获异常！")])]),t._v(" "),s("p",[t._v("下面是一段可能使用异常捕获的伪代码")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" heros "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" network"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeros")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从网络获取王者荣耀英雄数据，得到英雄数组")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createHTML")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("heros"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将数组生成HTML")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 出现网络故障，给用户显示一个提示框")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("showErrorDialog")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'网络故障，请检查您的网络是否连接正常。故障原因：'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"手动抛出异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#手动抛出异常"}},[t._v("#")]),t._v(" 手动抛出异常")]),t._v(" "),s("p",[t._v("不仅浏览器会自动给我们抛出异常，我们还可以手动的抛出异常")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" 异常对象"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当代码运行到这里，会终止执行，抛出异常对象，效果和浏览器抛出的错误完全一样")]),t._v("\n")])])]),s("p",[t._v("当编写函数时，如果满足下面三个条件，就可以选择抛出异常：")]),t._v(" "),s("ol",[s("li",[t._v("预知执行过程中可能会出现某种错误")]),t._v(" "),s("li",[t._v("浏览器不会抛出这个错误")]),t._v(" "),s("li",[t._v("该函数无法处理这个错误")])]),t._v(" "),s("p",[t._v("下面展现了一个需要抛出异常的例子")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 得到两个数字之和\n * 若传递的不是数字，则会抛出TypeError\n * @param {number} a 数字1\n * @param {number} b 数字2\n * @return {number} 两数之和\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'number'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'number'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypeError")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'必须传入两个数字才能求和'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("规范：如果某个函数需要抛出异常，一定要在函数的文档注释中阐述清楚")])]),t._v(" "),s("h2",{attrs:{id:"练习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#练习"}},[t._v("#")]),t._v(" 练习")]),t._v(" "),s("p",[t._v("说出下面的错误描述的含义，以及该错误发生的原因")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20211223103309.png",alt:"image-20211223103308973"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"http://mdrs.yuanjin.tech/img/20211223103332.png",alt:"image-20211223103332002"}})]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://mdrs.yuanjin.tech/img/20211223103347.png",alt:"image-20211223103347139"}}),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://mdrs.yuanjin.tech/img/20211223103450.png",alt:"image-20211223103450241"}})])}),[],!1,null,null,null);s.default=r.exports}}]);