# 位运算

将一个整数的二进制格式进行运算

js中，如果对一个数据进行位运算，它首先会将其转换为一个整数，并且按照32位的整数二进制排列

举例

```
2.7 -> 2 -> 0000 0000 0000 0000 0000 0000 0000 0010

NaN -> 0

Infinity -> 0

-Infinity -> 0
```

## 与运算

符号：&

写法：整数1 & 整数2

将两个整数每一位进行比较，如果都为1，结果为1，否则结果为0.

## 或运算

符号：|

写法：整数1 | 整数2

将两个整数每一位进行比较，如果都为0，结果为0，否则结果为1.

## 否（非）运算

符号：~

写法：~整数

将该整数按位取反

**负数的存储方式**

-1

真码：1000 0000 0000 0000 0000 0000 0000 0001
反码：1111 1111 1111 1111 1111 1111 1111 1110  真码取反
补码：1111 1111 1111 1111 1111 1111 1111 1111  反码加1  最终的存储方案

取反的快速运算：-数字 - 1

JS中最快速的取整的方式：``` ~~整数 ```

## 异或运算

符号：^

写法：数字1 ^ 数字2

将数字1和数字2按位比较，不同取1，相同取0

## 应用场景

位的叠加（开关）

## 位移运算

左位移： <<

写法： 数字1 << 数字2   结果： 数字1 * 2 ^ 数字2

将数字1的二进制（除符号之外，左移动数字2的次数）

右位移：>>

写法： 数字1 >> 数字2   结果： 整数(数字1 / 2 ^ 数字2)

全右位移：>>>

与右位移的区别，在于全右位移会导致符号位跟着位移。

## demo

### test

```html
<script>
    // 01
    // 11
    // = 
    // 01
    // console.log(1 & 3);

    // 001
    // 100
    // = 
    // 101
    // console.log(1 | 4);

    // 0000 0000 0000 0000 0000 0000 0000 0001
    // = 
    // 1111 1111 1111 1111 1111 1111 1111 1110
    // 反码：1111 1111 1111 1111 1111 1111 1111 1101
    // -2
    // console.log(~1);

    // 快速取整
    // ~~3.65645 = ~~3 = ~-4 = 3
    // console.log(~~3.65645);

    // 01
    // 11
    // 10
    // console.log(1 ^ 3);
</script>
```

### 交换变量

```js
       var a = 5, b = 3;

        // 方式1
        // var temp = a;
        // a = b;
        // b = temp;
        // console.log(a, b);

        // 方式2
        // a = a + b;
        // b = a - b; 
        // a = a - b;
        // console.log(a, b);

        // 方式3
        // 101
        // 011
        a = a ^ b; // 110
        b = a ^ b; // 110 ^ 011  = 101 = 5
        a = a ^ b; // 110 ^ 101  = 11 = 3
        console.log(a, b);
```

### 位的开关

```js
		//保存了所有可能的权限
        var perm = {
            read: 0b001, //读权限
            write: 0b010, //写（修改）权限
            create: 0b100 //创建权限
        };
        //变量p中保存可读可写
        var p = perm.create | perm.write;

        //去掉可读权限
        p = p | perm.read ^ perm.read;

        //判断权限：p中是否有可读权限
        // p: 011  & 001  = 001
        p & perm.read === perm.read ? console.log("可读") : console.log("不可读");
```

### 位移的运存

```html
<script>
    // 0000 0000 0000 0000 0000 0000 0000 0011
    // 0000 0000 0000 0000 0000 0000 0000 0110
    // console.log(3 << 1);

    // 1000 0000 0000 0000 0000 0000 0000 0011
    // 1000 0000 0000 0000 0000 0000 0000 1100
    // console.log(-3 << 2);

    // 0000 0000 0000 0000 0000 0000 0000 0011
    // 0000 0000 0000 0000 0000 0000 0000 0001
    console.log(3 >> 1);
</script>
```
