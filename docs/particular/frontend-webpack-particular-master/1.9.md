# 入口和出口

![](https://qwq9527.gitee.io/resource/imgs/2020-01-09-15-51-07.png)

> node内置模块 - path: https://nodejs.org/dist/latest-v12.x/docs/api/path.html

## 前置知识路径

1. `./`表示的意思

```js
/*

./ : 
1. 模块化代码中，比如require("./")，表示当前js文件所在的目录
2. 在路径处理中，"./"表示node运行目录
3.__dirname: 所有情况下，都表示当前运行的js文件所在的目录，它是一个绝对路径
*/

console.log(__dirname)
```
2. 内置模块 `path`
```js
//该对象提供了大量路径处理的函数

var path = require("path") //导出了一个对象

// var result = path.resolve("./", "child", "abc", "123");

var result = path.resolve(__dirname, "src");
console.log(result);
```



## **出口**

这里的出口是针对资源列表的文件名或路径的配置

出口通过output进行配置

## **入口**

## **入口真正配置的是chunk**

入口通过entry进行配置

规则：

- name：chunkname
- hash: 总的资源hash，通常用于解决缓存问题
- chunkhash: 使用chunkhash
- id: 使用chunkid，不推荐

```js
var path = require("path")

module.exports = {
    mode: "production",
    entry: {
        main: "./src/index.js", //属性名：chunk的名称， 属性值：入口模块（启动模块）
        a: ["./src/a.js", "./src/index.js"] //启动模块有两个
    },
    output: {
        path: path.resolve(__dirname, "target"), //必须配置一个绝对路径，表示资源放置的文件夹，默认是dist
        filename: "[id].[chunkhash:5].js" //配置的合并的js文件的规则
    },
    devtool: "source-map"
}
```

1. hash 是所有的 chunk 合并后的生成的。chunkhash 是单个 chunk 生成的（还和配置有关等）。

2. entry 配置的是 chunk，一个 chunk 有多个入口，如配置中 chunk a，打包后然后生成文件数不变。

3. a :[xxx.js,xxx.js] 打包后将按照先后顺序加载。

   ```js
   {
       //...
       /***/ 0:
   /*!***************************************!*\
     !*** multi ./src/a.js ./src/index.js ***!
     \***************************************/
   /*! no static exports found */
   /***/ (function(module, exports, __webpack_require__) {
   
   __webpack_require__(/*! ./src/a.js */"./src/a.js");// 先加载 a.js
   module.exports = __webpack_require__(/*! ./src/index.js */"./src/index.js"); // b.js
   
   /***/ })
   }
   ```

   