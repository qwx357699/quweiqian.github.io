## 网络层

## IP层-网络层
还记得咱们在宿舍的时候买了台交换机，几台机器组了一个局域网打游戏吗？可惜啊，只能打局域网的
游戏，不能上网啊！

**IP层解决的问题就是让你能上外网**

![1701676682630](https://qwq9527.gitee.io/resource/imgs/1701676682630.png)

*每个蓝色表示一个局域网,网关就是路由器，转换用的*

外网ip的转换也是路由器进行的，**具体的技术叫做NAT**

从数据链路层，和P层分析包的传输过程

1. ARP寻找网关
   a. 源P地址：113.114.0.1
   b. 目的P地址：10.10.0.1
   c. 源Mac地址：机器A的Mac
   d. 目标Mac地址：网关A的Mac
2. 出去 第一跳（通过路由寻址可以知道）
   a. 源IP地址：113.114.0.1
   b. 目的IP地址：10.10.0.1
   c. 源Mac地址：网关A的Mac
   d. 目标Mac地址：网关B的Mac
3. 出去 第二跳
   a. 源IP地址：113.114.0.1
   b. 目的IP地址：10.10.0.1
   c. 源Mac地址：网关B的Mac
   d. 目标Mac地址：网关C的Mac
4. 第三跳
   a. 源IP地址：113.114.0.1
   b. 目的IP地址：10.10.0.1
   c. 源Mac地址：网关C的Mac
   d. 目标Mac地址：网关D的Mac
5. ARP 找到服务器 机器B
a. 源IP地址：113.114.0.1
b. 目的IP地址：10.10.0.1
c. 源Mac地址：网关D的Mac
d. 目标Mac地址：网关B的Mac
